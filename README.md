# Shadow DOM Inspector (React Compatible)

標準の React DevTools が Shadow DOM 内のコンポーネントを認識できない問題を解決するための、Chrome 拡張機能です。
Shadow DOM や iframe が多用される環境でも、React コンポーネントツリー（Fiber）をスキャンし、Props や Hooks の状態を確認できます。

## 📦 インストール方法

この拡張機能は Chrome ウェブストアには公開していません。以下の手順で手動インストールしてください。

1.  Chrome ブラウザで `chrome://extensions/` を開く（または右上のメニュー > 拡張機能 > 拡張機能を管理）。
2.  右上の **「デベロッパー モード」** スイッチをオンにする。
3.  左上の **「パッケージ化されていない拡張機能を読み込む」** をクリック。
4.  このプロジェクトのフォルダ（`manifest.json` があるフォルダ）を選択する。

## 🚀 使い方

1.  React が動作している（Shadow DOM を含む）Web サイトを開く。
2.  F12 キーを押して Chrome DevTools を開く。
3.  タブの一覧から **「ShadowTree」** を選択する（隠れている場合は `>>` をクリック）。
4.  **Inspect Mode**: 左上の矢印アイコンをクリック（または有効化）し、ページ上の要素をホバー/クリックすると、ツリー内の該当コンポーネントが選択されます。
5.  **キーボード操作**: ツリー上で `↑` `↓` で移動、`→` で展開/子要素へ、`←` で折りたたみ/親要素へ移動できます。

## ✨ 機能

*   **Shadow DOM / iframe 対応**: 複数のフレームや Shadow Root を横断してスキャンします。
*   **React Fiber 解析**: コンポーネント名、Props、Hooks (State) を表示します。
*   **Inspect Mode**: 画面上の要素をクリックしてツリーを選択（React DevTools ライクな挙動）。
*   **キーボードナビゲーション**: 矢印キーによる快適なツリー操作。
*   **SPA 対応**: 画面遷移や DOM 更新を検知して自動で再スキャンします。

## 📝 TODO (今後の課題 / React DevTools との差分)

現在のバージョンは「参照専用」です。React DevTools にある以下の機能はまだ実装されていません。

*   [ ] **検索機能**: コンポーネント名でのフィルタリング（UIにはありますが未実装）。
*   [ ] **Props / State の編集**: 現在は読み取り専用です。値を書き換えてのデバッグはできません。
*   [ ] **コンソールへの出力**: 選択したデータを `$r` のようにコンソールで利用する機能。
*   [ ] **ソースコードへのジャンプ**: コンポーネントの定義元ファイルを開く機能。
*   [ ] **レンダリングのハイライト**: 再レンダリングされたコンポーネントを光らせる機能。
*   [ ] **Profiler**: パフォーマンス計測機能。

## 🔒 セキュリティとプライバシー

*   **完全ローカル動作**: この拡張機能は、解析したデータを外部サーバーに送信することは一切ありません。全ての処理はブラウザ内で完結します。
*   **権限**: `activeTab`, `scripting` などの権限を使用しますが、これらは開いているページを解析するためにのみ使用されます。

## ⚠️ トラブルシューティング (Beta版)

このツールは開発中のベータ版です。
React の内部構造（Fiber）に直接アクセスするため、稀に対象の Web アプリケーションの動作に影響を与える（フリーズなど）可能性があります。

*   **アプリが重くなった/止まった場合**: 拡張機能を無効化してページをリロードしてください。
*   **ツリーが表示されない場合**: DevTools を開き直すか、パネル内の「リロード（🔄）」ボタンを押してください。

## 📄 ライセンス

MIT License

個人開発、社内利用、OSS としての公開など、自由にご利用いただけます。
